
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}OceanSight Dashboard{% endblock %}</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_head %}{% endblock %}

  <style>
  :root{
    --bg:#f6f7fb; --card:#fff; --muted:#667085; --line:#ececec;
    --fg:#0f172a; --ok:#16a34a; --warn:#f59e0b; --cancel:#9ca3af;
    --blue:#0b57d0; --blue-600:#2563eb; --green-600:#16a34a;
  }
  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    margin:0; background:var(--bg); color:var(--fg);
  }
  .page{ max-width:1220px; padding:28px 14px; margin:0 auto; }
  .card{
    background:var(--card); border:1px solid var(--line);
    border-radius:16px; box-shadow:0 8px 20px rgba(15,23,42,.05);
    padding:24px 22px;
  }
  h1{ margin:0 0 14px; font-size:28px; letter-spacing:.2px; }
  .muted{ color:var(--muted); font-size:.95rem; }
  a{ color:var(--blue); text-decoration:none } a:hover{text-decoration:underline}
  .btn{
    display:inline-flex; align-items:center; gap:6px;
    padding:10px 16px; border-radius:10px; border:1px solid #111;
    background:#111; color:#fff; cursor:pointer; text-decoration:none;
    line-height:1;
  }
  .btn:disabled{ opacity:.6; cursor:not-allowed }
  .btn.btn-blue   { background:var(--blue-600); border-color:var(--blue-600); }
  .btn.btn-green  { background:var(--green-600); border-color:var(--green-600); }
  .btn.btn-ghost  { background:#fff; color:#111; border-color:#e5e7eb; }
  .table-wrap{ overflow-x:auto; margin-top:12px }
  table{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
  thead th{
    position:sticky; top:0; z-index:1; background:var(--card);
    text-align:left; font-weight:700; font-size:.9rem; padding:12px 14px; border-bottom:1px solid var(--line);
  }
  tbody td{
    padding:10px 14px; border-bottom:1px solid var(--line);
    vertical-align:top; font-size:14px;
  }
  tbody tr:nth-child(odd){ background:#fafbfd }
  tbody tr:hover{ background:#f6faff }
  .num{ text-align:right; font-variant-numeric:tabular-nums; }
  .nowrap{ white-space:nowrap }
  .wrap{ word-break:break-word }
  .listing{
    max-width:260px; overflow:hidden; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; line-height:1.25
  }
  .mono{ font-variant-numeric:tabular-nums }
  .dot{ width:12px; height:12px; display:inline-block; border-radius:999px; vertical-align:middle }
  .dot.ok{ background:var(--ok) } .dot.warn{ background:var(--warn) } .dot.cancel{ background:var(--cancel) }
  form label{ display:flex; gap:6px; align-items:center; font-size:.9rem; color:#334155 }
  input, select{ padding:8px 10px; border:1px solid #d0d5dd; border-radius:8px; outline:0 }
  @media (max-width:900px){
    .listing{ max-width:200px }
    thead th, tbody td{ padding:10px 12px }
    h1{ font-size:24px }
  }
  .navbar{
    display:flex; align-items:center; gap:12px;
    background:#fff; border:1px solid var(--line); border-radius:12px;
    padding:10px 14px; margin-bottom:16px;
    box-shadow:0 6px 16px rgba(15,23,42,.04);
  }
  .navbar{ position:sticky; top:0; z-index:100; }
  .nav-left,.nav-right{ display:flex; align-items:center; gap:8px; }
  .brand{ font-weight:700; margin-right:10px; white-space:nowrap; }
  .nav-link{
    display:inline-flex; align-items:center; gap:6px;
    padding:8px 10px; border:1px solid transparent; border-radius:8px;
    color:#334155; text-decoration:none; font-weight:500; white-space:nowrap;
  }
  .nav-link:hover{ background:#f6f7fb; border-color:#e5e7eb; text-decoration:none; }
  .nav-link.is-active{ background:#111; color:#fff; border-color:#111; }
  .nav-spacer{ flex:1 1 auto; }
  .pill{ padding:2px 8px; border-radius:999px; background:#eef2ff; color:#3730a3; font-size:12px; }
  .nav-dropdown {
  position: relative;
}
.nav-dropdown .dropdown-menu {
  display: none;
  position: absolute;
  top: 42px;
  left: 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(0,0,0,.08);
  min-width: 180px;
  z-index: 10;
  padding: 6px 0;
}
.nav-dropdown:hover .dropdown-menu {
  display: block;
}
.dropdown-menu a {
  display: block;
  padding: 10px 16px;
  color: #111;
  text-decoration: none;
}
.dropdown-menu a:hover {
  background-color: #f0f2f8;
}

.btn-sm {
  padding: 4px 10px;
  font-size: 13px;
  border-radius: 6px;
}
.btn-danger {
  background: #dc2626;
  border-color: #dc2626;
  color: white;
}
.btn-danger:hover {
  background: #b91c1c;
}

table td.nowrap {
  white-space: nowrap;
}
.btn-icon {
  border: none;
  background: none;
  color: #64748b;
  font-size: 16px;
  padding: 4px 6px;
  cursor: pointer;
}
.btn-icon:hover {
  color: #0f172a;
  background: #f1f5f9;
  border-radius: 6px;
}
.btn-edit { color: #2563eb; }
.btn-delete { color: #dc2626; }

  </style>
</head>

<body>
  <div class="page">
    {% set path = request.path if request is defined else '' %}
    {% if not path.startswith('/login') %}
    <nav class="navbar">
      <div class="nav-left">
        <span class="brand">üè® OceanSight</span>

        <a class="nav-link {{ 'is-active' if path=='/' else '' }}" href="/">üè† Trang ch·ªß</a>
        <!-- Brain Dashboard - Developer Only Access (Hidden from client UI) -->
        <a class="nav-link {{ 'is-active' if path.startswith('/bookings') else '' }}" href="/bookings">üìë ƒê·∫∑t ph√≤ng</a>
        <a class="nav-link {{ 'is-active' if path.startswith('/reports') else '' }}" href="/reports/monthly">üìä B√°o c√°o</a>  
        <a class="nav-link {{ 'is-active' if path.startswith('/salespeople') else '' }}" href="/salespeople">üë• Nh√¢n vi√™n Sale</a>
        <a class="nav-link {{ 'is-active' if path.startswith('/calendar') else '' }}" href="/calendar">üìÖ L·ªãch Tr·ªëng</a>


        <div class="nav-dropdown">
          <a class="nav-link {{ 'is-active' if path.startswith('/buildings') or path.startswith('/properties') else '' }}" href="#">üè¢ T√≤a nh√† & CƒÉn h·ªô ‚ñæ</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="/buildings">üì¶ T√≤a nh√†</a>
            <a class="dropdown-item" href="/properties">üè† CƒÉn h·ªô</a>
            <a class="dropdown-item" href="/property_charges">üí∏ Ph·ª• ph√≠ cƒÉn h·ªô</a>
          </div>
        </div>

        <div class="nav-dropdown">
          <a class="nav-link {{ 'is-active' if path.startswith('/expenses') else '' }}" href="#">üí∞ S·ªï chi ‚ñæ</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="/expenses/ledger">üìí S·ªï chi</a>
          </div>
        </div>

        <a class="btn btn-green" href="/bookings/new?channel=Offline">Ôºã Th√™m Offline</a>
      </div>

      <div class="nav-spacer"></div>
      <div class="nav-right">
        <!-- V√≠ d·ª• b·ªï sung -->
        <!-- <a class="nav-link" href="/logout">ƒêƒÉng xu·∫•t</a> -->
      </div>
    </nav>
    {% endif %}

    <div class="card">
      {% block content %}{% endblock %}
    </div>
  </div>
  {% block extra_scripts %}{% endblock %}
</body>
</html>
