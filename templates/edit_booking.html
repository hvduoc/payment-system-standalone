{% extends "layout.html" %}
{% block content %}
<h1>Ch·ªânh s·ª≠a ƒë·∫∑t ph√≤ng</h1>
<p class="muted"><a href="/bookings">‚Üê Quay l·∫°i danh s√°ch</a></p>

<form method="post" action="/bookings/{{ booking.id }}/edit" style="margin-top:24px; display:grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 800px;">
  <label style="grid-column: 1 / -1;">CƒÉn h·ªô
    <select name="property_id" required>
      {% for prop in properties %}
        <option value="{{ prop.id }}" {{ 'selected' if booking.property_id == prop.id else '' }}>
          {{ prop.property_short or prop.property_name }}
        </option>
      {% endfor %}
    </select>
  </label>

  <label>Ng√†y nh·∫≠n ph√≤ng
    <input type="date" name="start_date" value="{{ booking.start_date }}" required>
  </label>
  <label>Ng√†y tr·∫£ ph√≤ng
    <input type="date" name="end_date" value="{{ booking.end_date }}" required>
  </label>

  <label>T·ªïng thu nh·∫≠p (VND)
    <input type="number" name="total_payout_vnd" value="{{ booking.total_payout_vnd or '' }}" required>
  </label>

  <label>Nh√¢n vi√™n Sale
    <select name="salesperson_id">
      <option value="">-- Kh√¥ng c√≥ --</option>
      {% for sale in salespeople %}
        <option value="{{ sale.id }}" {{ 'selected' if booking.salesperson_id == sale.id else '' }}>
          {{ sale.name }}
        </option>
      {% endfor %}
    </select>
  </label>

  <label>T√™n kh√°ch
    <input type="text" name="guest_name" value="{{ booking.guest_name or '' }}">
  </label>
  <label>Li√™n h·ªá
    <input type="text" name="guest_contact" value="{{ booking.guest_contact or '' }}">
  </label>

  <label for="notes">Ghi ch√∫
    <textarea id="notes" name="notes" rows="5">{{ booking.notes or "" }}</textarea>
  </label>

  <label>K√™nh
    <select name="channel_id" required>
      {% for ch in channels %}
        <option value="{{ ch.id }}" {{ 'selected' if booking.channel_id == ch.id else '' }}>
          {{ ch.channel_name }}
        </option>
      {% endfor %}
    </select>
  </label>

  <div style="grid-column: 1 / -1; margin-top: 12px;">
    <button class="btn" type="submit">C·∫≠p nh·∫≠t</button>
    <a href="/bookings/{{ booking.id }}/room-assignment" class="btn" style="margin-left: 8px; background: #17a2b8;">üè† Qu·∫£n l√Ω ph√≤ng</a>
  </div>
</form>
{% endblock %}
