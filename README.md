# Payment System Standalone 💰📱

Hệ thống quản lý thu chi Airbnb hoàn toàn độc lập - tối ưu cho mobile với tính năng đa tòa nhà.

## 🎯 **Tính năng chính:**

### 🏢 **Quản lý đa tòa nhà**
- Tạo, sửa, xóa tòa nhà với validation data protection
- Phân quyền theo vai trò: Owner/Manager/Assistant  
- Quản lý thanh toán riêng biệt cho từng tòa nhà
- Building management với SweetAlert2 confirmations

### 💰 **Quản lý Thu Chi CRUD hoàn chỉnh**
- Tạo, sửa, xóa record thanh toán
- Upload hình ảnh biên lai với preview
- Theo dõi tỷ lệ thu theo thời gian thực
- Edit/Delete functionality với role permissions

### 🤝 **Bàn giao tiền mặt**
- Full CRUD operations cho handover records
- Upload hình ảnh bàn giao với mobile optimization
- Theo dõi trạng thái ký nhận theo tòa nhà

### � **Mobile-First Design**
- Responsive breakpoints: 640px/768px/1024px
- Touch-friendly buttons (minimum 44px)
- Hamburger navigation menu
- PWA-ready với install prompts
- Mobile-optimized dashboard với quick actions

### � **Bảo mật nâng cao**
- SHA256 authentication (Railway-compatible)
- Role-based access control per building
- Session management với mobile logout support

## 🛠 **Tech Stack:**

- **Backend**: FastAPI + SQLAlchemy
- **Database**: PostgreSQL (production) / SQLite (development)  
- **Frontend**: TailwindCSS + JavaScript + SweetAlert2
- **Mobile**: PWA-ready với Service Worker
- **Authentication**: SHA256 hashing (Railway-compatible)
- **Deployment**: Railway.app + Docker + Nixpacks

## 🚀 **Railway Deployment:**

### **Script tự động:**
```bash
# Windows PowerShell
.\deploy_railway.ps1

# Linux/Mac  
./deploy_railway.sh
```

### **1. Chuẩn bị GitHub:**
- Push code lên GitHub repository
- Ensure Dockerfile và railway.toml có sẵn

### **2. Railway Setup:**
```bash
railway.app → New Project → Deploy from GitHub repo
→ Select: payment-system-standalone
→ Add PostgreSQL database
```

### **3. Environment Variables:**
```env
SECRET_KEY=(auto-generated by script)
DATABASE_URL=${{PostgreSQL.DATABASE_URL}}
PORT=8000
```

### **4. Mobile PWA Features:**
- Install prompt on mobile browsers
- Add to Home Screen capability  
- Offline-ready service worker
- Native app experience

## 📱 **Mobile Optimization:**

### **Responsive Design:**
- Mobile-first approach với TailwindCSS
- Touch-friendly interface elements
- Hamburger menu navigation
- Optimized for portrait/landscape

### **PWA Features:**
- Service Worker cho offline capability
- Install prompt for native app experience
- Mobile-optimized quick actions
- Touch feedback và haptic response

### **User Experience:**
- Quick action buttons trên dashboard
- Swipe-friendly navigation
- Mobile keyboard optimization
- Export functions mobile-ready

## 🎯 **Production Ready Features:**

- ✅ **Multi-building architecture** với building management
- ✅ **Full CRUD operations** cho payments/handovers/buildings
- ✅ **Mobile-first responsive design** 
- ✅ **PWA-ready** với install prompts
- ✅ **Role-based access control** per building
- ✅ **SHA256 authentication** (Railway-compatible)
- ✅ **Auto database initialization** với sample data
- ✅ **Touch-friendly navigation** với hamburger menu
- ✅ **Real-time dashboard updates** mobile-optimized
- ✅ **Vietnamese interface** hoàn chỉnh
- ✅ **Data protection** với validation checks

## 🔧 **Local Development:**

```bash
# Install dependencies
pip install -r requirements.txt

# Initialize database với sample data
python init_production.py
python create_demo_users.py

# Run locally
python main.py

# Access: http://localhost:8000
```

## � **User Roles & Demo Accounts:**

### **Owner** (Full Access)
```
Username: admin
Password: admin123
- Quản lý tất cả buildings
- Full CRUD permissions
- User management access
```

### **Manager** (Building-specific)  
```
Username: manager1
Password: manager123
- Quản lý assigned buildings
- Create/edit payments & handovers
- View reports và analytics
```

### **Assistant** (Read-only)
```
Username: assistant1  
Password: assistant123
- View-only access
- No edit/delete permissions
- Basic reporting access
```

## 📱 **Mobile Usage Guide:**

### **PWA Installation:**
1. Mở website trên mobile browser
2. Tap browser menu → "Add to Home Screen"
3. App icon sẽ xuất hiện trên home screen
4. Launch như native app

### **Touch Navigation:**
- Hamburger menu (☰) cho mobile navigation
- Quick action buttons trên dashboard
- Swipe-friendly tables và forms
- Touch feedback cho buttons

### **Responsive Features:**
- Auto-resize cho different screen sizes
- Portrait/landscape optimization  
- Mobile keyboard support
- Touch-friendly date/time pickers

---

## 🏗️ **Architecture Overview:**

### **Database Schema:**
```sql
Buildings: id, name, address, contact_info, created_at
Payments: id, building_id, room_number, amount, payment_date, type
Handovers: id, building_id, handover_date, room_count, total_amount
Users: id, username, password_hash, role, assigned_buildings
```

### **File Structure:**
```
payment-system-standalone/
├── main.py                    # FastAPI application
├── database_production.py     # Models & database setup
├── Dockerfile                 # Container configuration  
├── railway.toml              # Railway deployment config
├── requirements.txt          # Python dependencies
├── deploy_railway.ps1        # Windows deployment script
├── templates/
│   ├── payment_layout.html   # Mobile-responsive base layout
│   ├── dashboard_mobile.html # Mobile-first dashboard
│   ├── admin_payments.html   # Payment management with CRUD
│   ├── buildings.html        # Building management interface
│   └── auth_login.html       # Login page
└── static/                   # CSS, JS, images
```

## 🔐 **Security Features:**

- **SHA256 Password Hashing** (Railway-compatible)
- **Session-based Authentication** với secure cookies
- **Role-based Authorization** per building access
- **CSRF Protection** cho form submissions
- **Input Validation** và sanitization
- **SQL Injection Prevention** với parameterized queries

## 🚀 **Deployment Checklist:**

### **Pre-deployment:**
- [ ] Update GitHub repository URL trong deploy script
- [ ] Generate SECRET_KEY using deploy script
- [ ] Test mobile responsiveness locally
- [ ] Verify PWA functionality

### **Railway Setup:**
- [ ] Create new Railway project from GitHub
- [ ] Add PostgreSQL database service
- [ ] Set environment variables (SECRET_KEY, PORT)
- [ ] Verify auto-deployment on git push

### **Post-deployment Testing:**
- [ ] Test login on mobile device
- [ ] Verify responsive design on different screens
- [ ] Test PWA installation (Add to Home Screen)
- [ ] Check building management CRUD operations
- [ ] Validate role-based access control
- [ ] Test payment/handover creation/editing

**Phát triển bởi**: GitHub Copilot  
**Version**: 3.0 Mobile-Optimized Production  
**Ngày**: 03/01/2025  
**Status**: 🟢 Railway Deployment Ready 🚀📱